databaseChangeLog:
  - changeSet:
      id: 1599301929284-1
      author: thoma (generated)
      changes:
        - createSequence:
            incrementBy: 1
            sequenceName: SEQUENCE_COMMENT_ID
            startValue: 1
  - changeSet:
      id: 1599301929284-2
      author: thoma (generated)
      changes:
        - createSequence:
            incrementBy: 1
            sequenceName: SEQUENCE_STEP_ENTRY_ID
            startValue: 1
  - changeSet:
      id: 1599301929284-3
      author: thoma (generated)
      changes:
        - createSequence:
            incrementBy: 1
            sequenceName: SEQUENCE_STEP_ID
            startValue: 1
  - changeSet:
      id: 1599301929284-4
      author: thoma (generated)
      changes:
        - createSequence:
            incrementBy: 1
            sequenceName: SEQUENCE_USER_ID
            startValue: 1
  - changeSet:
      id: 1599301929284-5
      author: thoma (generated)
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: COMMENTPK
                  name: ID
                  type: BIGINT
              - column:
                  constraints:
                    nullable: false
                  name: CREATION_DATE
                  type: TIMESTAMP WITHOUT TIME ZONE
              - column:
                  constraints:
                    nullable: false
                  name: MESSAGE
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: STATE
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: UPDATE_DATE
                  type: TIMESTAMP WITHOUT TIME ZONE
              - column:
                  constraints:
                    nullable: false
                  name: STEP_ENTRY_ID
                  type: BIGINT
            tableName: COMMENT
  - changeSet:
      id: 1599301929284-6
      author: thoma (generated)
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: STEPPK
                  name: ID
                  type: BIGINT
              - column:
                  name: GROUP_NAME
                  type: VARCHAR(50)
              - column:
                  constraints:
                    nullable: false
                  name: NAME
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: ORDINAL
                  type: INTEGER
              - column:
                  constraints:
                    nullable: false
                  name: ROLE
                  type: VARCHAR(255)
            tableName: STEP
  - changeSet:
      id: 1599301929284-7
      author: thoma (generated)
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: STEP_ENTRYPK
                  name: ID
                  type: BIGINT
              - column:
                  constraints:
                    nullable: false
                  name: CREATION_DATE
                  type: TIMESTAMP WITHOUT TIME ZONE
              - column:
                  constraints:
                    nullable: false
                  name: DATE
                  type: date
              - column:
                  constraints:
                    nullable: false
                  name: PROJECT
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: STATE
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: UPDATE_DATE
                  type: TIMESTAMP WITHOUT TIME ZONE
              - column:
                  constraints:
                    nullable: false
                  name: ASSIGNEE_USER_ID
                  type: BIGINT
              - column:
                  constraints:
                    nullable: false
                  name: OWNER_USER_ID
                  type: BIGINT
              - column:
                  constraints:
                    nullable: false
                  name: STEP_ID
                  type: BIGINT
            tableName: STEP_ENTRY
  - changeSet:
      id: 1599301929284-8
      author: thoma (generated)
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: USERPK
                  name: ID
                  type: BIGINT
              - column:
                  constraints:
                    nullable: false
                  name: CREATION_DATE
                  type: TIMESTAMP WITHOUT TIME ZONE
              - column:
                  constraints:
                    nullable: false
                  name: EMAIL
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: UPDATE_DATE
                  type: TIMESTAMP WITHOUT TIME ZONE
            tableName: USER
  - changeSet:
      id: 1599301929284-9
      author: thoma (generated)
      changes:
        - addUniqueConstraint:
            columnNames: EMAIL
            constraintName: UIDX_EMAIL
            tableName: USER
  - changeSet:
      id: 1599301929284-10
      author: thoma (generated)
      changes:
        - addUniqueConstraint:
            columnNames: ORDINAL
            constraintName: UIDX_ORDINAL
            tableName: STEP
  - changeSet:
      id: 1599301929284-11
      author: thoma (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: GROUP_NAME
            indexName: IDX_GROUP_NAME
            tableName: STEP
  - changeSet:
      id: 1599301929284-12
      author: thoma (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: ASSIGNEE_USER_ID
            baseTableName: STEP_ENTRY
            constraintName: FK_ASSIGNEE_USER_ID
            deferrable: false
            initiallyDeferred: false
            referencedColumnNames: ID
            referencedTableName: USER
            validate: true
  - changeSet:
      id: 1599301929284-13
      author: thoma (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: OWNER_USER_ID
            baseTableName: STEP_ENTRY
            constraintName: FK_OWNER_USER_ID
            deferrable: false
            initiallyDeferred: false
            referencedColumnNames: ID
            referencedTableName: USER
            validate: true
  - changeSet:
      id: 1599301929284-14
      author: thoma (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: STEP_ENTRY_ID
            baseTableName: COMMENT
            constraintName: FK_STEP_ENTRY
            deferrable: false
            initiallyDeferred: false
            referencedColumnNames: ID
            referencedTableName: STEP_ENTRY
            validate: true
  - changeSet:
      id: 1599301929284-15
      author: thoma (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: STEP_ID
            baseTableName: STEP_ENTRY
            constraintName: FK_STEP_ID
            deferrable: false
            initiallyDeferred: false
            referencedColumnNames: ID
            referencedTableName: STEP
            validate: true
  - changeSet:
      id: insert-step
      author: thoma
      changes:
        - loadData:
            tableName: STEP
            separator: ';'
            file: 'db/data/step-2.0.csv'
